(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[815],{9707:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var i=t(7876),n=t(4232),o=t(1723);function d(){var e;let[r,t]=(0,n.useState)([]),[d,s]=(0,n.useState)(""),[l,a]=(0,n.useState)("Food"),[c,h]=(0,n.useState)(""),[m,g]=(0,n.useState)(new Date().toISOString().split("T")[0]),[p,x]=(0,n.useState)(null),[u,y]=(0,n.useState)(!1),[f,b]=(0,n.useState)(null),[j,v]=(0,n.useState)(null),[k,D]=(0,n.useState)(null),S=async()=>{try{let e=await fetch("http://127.0.0.1:5000/expenses");if(e.ok){let r=await e.json();t(r)}}catch(e){console.error("Error fetching expenses:",e)}},w=async()=>{try{let e=await fetch("http://127.0.0.1:5000/ai/insights");if(e.ok){let r=await e.json();b(r)}}catch(e){console.error("Error fetching AI insights:",e)}},B=async()=>{try{let e=await fetch("http://127.0.0.1:5000/ai/health");if(e.ok){let r=await e.json();v(r)}}catch(e){console.error("Error fetching health score:",e)}},A=async e=>{if(!e.trim())return void D(null);try{let r=await fetch("http://127.0.0.1:5000/ai/categorize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:e})});if(r.ok){let e=await r.json();D(e),e.confidence>70&&a(e.category)}}catch(e){console.error("Error categorizing description:",e)}},C=async()=>{if(!d||!c)return void alert("Please fill in all fields");let e={amount:parseFloat(d),category:l,description:c,date:m,timestamp:new Date().toISOString()};try{(await fetch("http://127.0.0.1:5000/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok&&(s(""),h(""),g(new Date().toISOString().split("T")[0]),a("Food"),D(null),S(),w(),B())}catch(e){console.error("Error adding expense:",e),alert("Failed to add expense")}},E=async e=>{try{(await fetch(`http://127.0.0.1:5000/expenses/${e}`,{method:"DELETE"})).ok&&(S(),w(),B())}catch(e){console.error("Error deleting expense:",e),alert("Failed to delete expense")}},z=async()=>{if(0===r.length)return void alert("No expenses to analyze");y(!0);try{let e=r.map(e=>e.amount),t=r.map(e=>e.category),i=await fetch("http://127.0.0.1:5000/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({expenses:e,categories:t})});if(i.ok){let e=await i.json();x(e)}}catch(e){console.error("Error analyzing expenses:",e),alert("Failed to analyze expenses")}finally{y(!1)}};(0,n.useEffect)(()=>{S(),w(),B()},[]),(0,n.useEffect)(()=>{let e=setTimeout(()=>{c.trim()&&A(c)},500);return()=>clearTimeout(e)},[c]);let R=r.reduce((e,r)=>e+r.amount,0);return(0,i.jsx)(o.lJ,{publishableKey:"pk_test_bW9yYWwtY29sdC00MS5jbGVyay5hY2NvdW50cy5kZXYk",children:(0,i.jsxs)("div",{style:{minHeight:"100vh",background:"white",fontFamily:"Arial, sans-serif",color:"black",padding:"2rem"},children:[(0,i.jsx)(o.Bl,{children:(0,i.jsxs)("div",{style:{maxWidth:"600px",margin:"0 auto",border:"1px solid #ddd",padding:"2rem",borderRadius:"8px",background:"#f9f9f9",textAlign:"center"},children:[(0,i.jsx)("h1",{children:"\uD83D\uDD12 Please Sign In"}),(0,i.jsx)("p",{children:"You need to be signed in to access the expenses page."}),(0,i.jsx)(o.Ls,{})]})}),(0,i.jsx)(o.iB,{children:(0,i.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[(0,i.jsx)("h1",{style:{textAlign:"center",fontSize:"2rem",marginBottom:"2rem",color:"#333"},children:"\uD83D\uDCB0 Smart Expense Tracker with AI"}),j&&(0,i.jsxs)("div",{style:{border:"1px solid #ddd",padding:"1.5rem",borderRadius:"8px",background:"#f9f9f9",marginBottom:"2rem",textAlign:"center"},children:[(0,i.jsx)("h2",{style:{marginBottom:"1rem",color:"#333"},children:"\uD83C\uDFE5 Financial Health Score"}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"2rem",flexWrap:"wrap"},children:[(0,i.jsxs)("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:(e=j.overall_score)>=80?"#28a745":e>=60?"#ffc107":"#dc3545",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold"},children:[(0,i.jsx)("div",{style:{fontSize:"2rem"},children:j.overall_score}),(0,i.jsx)("div",{style:{fontSize:"1.2rem"},children:j.grade})]}),(0,i.jsxs)("div",{style:{textAlign:"left"},children:[(0,i.jsx)("h3",{style:{marginBottom:"0.5rem",color:"#333"},children:j.status}),(0,i.jsx)("p",{style:{color:"#666",marginBottom:"0.5rem"},children:j.trend}),j.recommendations.slice(0,2).map((e,r)=>(0,i.jsx)("p",{style:{fontSize:"0.9rem",color:"#666",margin:"0.2rem 0"},children:e},r))]})]})]}),(0,i.jsxs)("div",{style:{border:"1px solid #ddd",padding:"2rem",borderRadius:"8px",background:"#f9f9f9",marginBottom:"2rem"},children:[(0,i.jsx)("h2",{style:{marginBottom:"1.5rem",textAlign:"center",color:"#333"},children:"➕ Add New Expense"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:"Amount (€)"}),(0,i.jsx)("input",{type:"number",value:d,onChange:e=>s(e.target.value),placeholder:"0.00",style:{width:"100%",padding:"0.75rem",borderRadius:"5px",border:"1px solid #ddd",background:"white",color:"black",fontSize:"1rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:"Category"}),(0,i.jsx)("select",{value:l,onChange:e=>a(e.target.value),style:{width:"100%",padding:"0.75rem",borderRadius:"5px",border:"1px solid #ddd",background:"white",color:"black",fontSize:"1rem"},children:["Food","Transport","Shopping","Entertainment","Bills","Healthcare","Education","Travel","Other"].map(e=>(0,i.jsx)("option",{value:e,children:e},e))}),k&&k.confidence>70&&(0,i.jsxs)("div",{style:{marginTop:"0.5rem",padding:"0.5rem",background:"#d4edda",borderRadius:"3px",fontSize:"0.9rem",color:"#155724"},children:["\uD83E\uDD16 AI suggests: ",k.category," (",k.confidence,"% confidence)"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:"Date"}),(0,i.jsx)("input",{type:"date",value:m,onChange:e=>g(e.target.value),style:{width:"100%",padding:"0.75rem",borderRadius:"5px",border:"1px solid #ddd",background:"white",color:"black",fontSize:"1rem"}})]})]}),(0,i.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",color:"#333"},children:"Description"}),(0,i.jsx)("input",{type:"text",value:c,onChange:e=>h(e.target.value),placeholder:"What was this expense for? (AI will suggest category)",style:{width:"100%",padding:"0.75rem",borderRadius:"5px",border:"1px solid #ddd",background:"white",color:"black",fontSize:"1rem"}}),k&&k.alternatives.length>0&&(0,i.jsxs)("div",{style:{marginTop:"0.5rem",padding:"0.5rem",background:"#f8f9fa",borderRadius:"3px",fontSize:"0.9rem"},children:[(0,i.jsx)("strong",{children:"Other possible categories:"})," ",k.alternatives.join(", ")]})]}),(0,i.jsx)("button",{onClick:C,style:{width:"100%",padding:"1rem",borderRadius:"5px",border:"none",background:"#007bff",color:"white",fontSize:"1.1rem",fontWeight:"bold",cursor:"pointer",transition:"background 0.3s ease"},onMouseOver:e=>e.target.style.background="#0056b3",onMouseOut:e=>e.target.style.background="#007bff",children:"➕ Add Expense"})]}),f&&f.insights&&f.insights.length>0&&(0,i.jsxs)("div",{style:{border:"1px solid #ddd",padding:"2rem",borderRadius:"8px",background:"#f9f9f9",marginBottom:"2rem"},children:[(0,i.jsx)("h2",{style:{marginBottom:"1.5rem",textAlign:"center",color:"#333"},children:"\uD83E\uDD16 AI Insights & Recommendations"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{style:{marginBottom:"1rem",color:"#007bff"},children:"\uD83D\uDCCA Insights"}),(0,i.jsx)("div",{style:{background:"white",padding:"1rem",borderRadius:"5px",border:"1px solid #ddd"},children:f.insights.slice(0,3).map((e,r)=>(0,i.jsx)("p",{style:{marginBottom:"0.5rem",lineHeight:"1.4"},children:e},r))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{style:{marginBottom:"1rem",color:"#28a745"},children:"\uD83D\uDCA1 Smart Suggestions"}),(0,i.jsx)("div",{style:{background:"white",padding:"1rem",borderRadius:"5px",border:"1px solid #ddd"},children:f.suggestions.slice(0,3).map((e,r)=>(0,i.jsx)("p",{style:{marginBottom:"0.5rem",lineHeight:"1.4"},children:e},r))})]})]}),f.anomalies&&f.anomalies.length>0&&(0,i.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,i.jsx)("h3",{style:{marginBottom:"1rem",color:"#dc3545"},children:"⚠️ Unusual Spending Detected"}),(0,i.jsx)("div",{style:{background:"white",padding:"1rem",borderRadius:"5px",border:"1px solid #ddd"},children:f.anomalies.slice(0,2).map((e,r)=>(0,i.jsxs)("div",{style:{marginBottom:"0.5rem",padding:"0.5rem",background:"#f8d7da",borderRadius:"3px"},children:[(0,i.jsx)("strong",{children:e.expense.description})," - ",e.reason]},r))})]})]}),(0,i.jsxs)("div",{style:{border:"1px solid #ddd",padding:"1.5rem",borderRadius:"8px",background:"#f9f9f9",marginBottom:"2rem",textAlign:"center"},children:[(0,i.jsx)("h2",{style:{marginBottom:"1rem",color:"#333"},children:"\uD83D\uDCCA Summary"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1.5rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#333"},children:["€",R.toFixed(2)]}),(0,i.jsx)("div",{style:{color:"#666"},children:"Total Expenses"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#333"},children:r.length}),(0,i.jsx)("div",{style:{color:"#666"},children:"Number of Expenses"})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#333"},children:["€",r.length>0?(R/r.length).toFixed(2):"0.00"]}),(0,i.jsx)("div",{style:{color:"#666"},children:"Average per Expense"})]})]}),(0,i.jsx)("button",{onClick:z,disabled:u||0===r.length,style:{padding:"1rem 2rem",borderRadius:"5px",border:"none",background:u?"#6c757d":"#28a745",color:"white",fontSize:"1rem",fontWeight:"bold",cursor:u?"not-allowed":"pointer",transition:"background 0.3s ease"},onMouseOver:e=>!u&&(e.target.style.background="#1e7e34"),onMouseOut:e=>!u&&(e.target.style.background="#28a745"),children:u?"\uD83D\uDD04 Analyzing...":"\uD83E\uDDE0 Get Detailed AI Analysis"})]}),p&&(0,i.jsxs)("div",{style:{border:"1px solid #ddd",padding:"2rem",borderRadius:"8px",background:"#f9f9f9",marginBottom:"2rem"},children:[(0,i.jsx)("h2",{style:{marginBottom:"1.5rem",textAlign:"center",color:"#333"},children:"\uD83E\uDD16 Detailed AI Analysis"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{style:{marginBottom:"1rem",color:"#007bff"},children:"\uD83D\uDCC8 Financial Metrics"}),(0,i.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"5px",border:"1px solid #ddd"},children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Total:"})," €",p.total]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Average:"})," €",p.average]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Health Score:"})," ",p.health_score,"/100 (",p.health_grade,")"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Status:"})," ",p.health_status]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{style:{marginBottom:"1rem",color:"#28a745"},children:"\uD83D\uDCA1 AI Recommendations"}),(0,i.jsx)("div",{style:{background:"white",padding:"1rem",borderRadius:"5px",border:"1px solid #ddd"},children:p.health_recommendations&&p.health_recommendations.map((e,r)=>(0,i.jsx)("p",{style:{marginBottom:"0.5rem",lineHeight:"1.4"},children:e},r))})]})]}),(0,i.jsx)("div",{style:{textAlign:"center",marginTop:"2rem"},children:(0,i.jsx)("button",{onClick:()=>x(null),style:{padding:"0.5rem 1rem",borderRadius:"5px",border:"1px solid #ddd",background:"white",color:"#333",cursor:"pointer"},children:"Hide Analysis"})})]}),(0,i.jsxs)("div",{style:{border:"1px solid #ddd",padding:"2rem",borderRadius:"8px",background:"#f9f9f9"},children:[(0,i.jsx)("h2",{style:{marginBottom:"1.5rem",textAlign:"center",color:"#333"},children:"\uD83D\uDCCB Recent Expenses"}),0===r.length?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:[(0,i.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\uD83D\uDCDD"}),(0,i.jsx)("p",{children:"No expenses yet. Add your first expense above!"})]}):(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:r.slice().reverse().map(e=>(0,i.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"5px",border:"1px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,i.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:{Food:"#dc3545",Transport:"#28a745",Shopping:"#007bff",Entertainment:"#ffc107",Bills:"#17a2b8",Healthcare:"#6f42c1",Education:"#fd7e14",Travel:"#20c997",Other:"#6c757d"}[e.category]||"#6c757d",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"1.2rem",color:"white"},children:e.category.charAt(0)}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"#333"},children:e.description}),(0,i.jsxs)("div",{style:{color:"#666",fontSize:"0.9rem"},children:[e.category," • ",new Date(e.date).toLocaleDateString()]}),e.ai_categorization&&(0,i.jsxs)("div",{style:{fontSize:"0.8rem",color:"#007bff"},children:["\uD83E\uDD16 AI confidence: ",e.ai_categorization.confidence,"%"]})]})]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,i.jsxs)("div",{style:{fontWeight:"bold",fontSize:"1.2rem",color:"#333"},children:["€",e.amount.toFixed(2)]}),(0,i.jsx)("button",{onClick:()=>E(e.id),style:{background:"#dc3545",border:"none",color:"white",padding:"0.5rem",borderRadius:"3px",cursor:"pointer",fontSize:"0.9rem"},onMouseOver:e=>e.target.style.background="#c82333",onMouseOut:e=>e.target.style.background="#dc3545",children:"\uD83D\uDDD1️"})]})]},e.id))})]})]})})]})})}},9976:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/expenses",function(){return t(9707)}])}},e=>{e.O(0,[723,636,593,792],()=>e(e.s=9976)),_N_E=e.O()}]);